
๐ NemoViewer: ะะธะทัะฐะปะธะทะฐัะพั ะดะฐะฝะฝัั ะพะบะตะฐะฝะพะณัะฐัะธัะตัะบะพะน ะผะพะดะตะปะธ NEMO
ะัะพะตะบั ะฟัะตะดะฝะฐะทะฝะฐัะตะฝ ะดะปั ะฟัะตะดััะฐะฒะปะตะฝะธั ะบะพะปะปะตะณะฐะผ-ะพะบะตะฐะฝะพะปะพะณะฐะผ ัะตะทัะปััะฐัะพะฒ ัะฐะฑะพัั ะผะพะดะตะปะธ NEMO. ะะพะทะฒะพะปัะตั ะฟัะพัะผะฐััะธะฒะฐัั ะบะฐััั ะณะธะดัะพะปะพะณะธัะตัะบะธั ะฟะฐัะฐะผะตััะพะฒ, ัััะพะธัั TS-ะดะธะฐะณัะฐะผะผั, ะฒะตััะธะบะฐะปัะฝัะต ัะฐะทัะตะทั ะธ ะฐะฝะธะผะธัะพะฒะฐะฝะฝัะต ััะฐะตะบัะพัะธะธ ัะฐััะธั ะฟะพ ะฟะพะปั ัะตัะตะฝะธะน.

๐ ะัะฝะพะฒะฝัะต ะฒะพะทะผะพะถะฝะพััะธ
ะะฝัะตัะฐะบัะธะฒะฝัะต ะบะฐััั: ะัะฑะพั ะดะฐัั, ัะตะณะธะพะฝะฐ, ะณะปัะฑะธะฝั ะธ ะฟะฐัะฐะผะตััะฐ (ัะตะผะฟะตัะฐัััะฐ, ัะพะปะตะฝะพััั, ัะตัะตะฝะธั, ะปะตะด, ััะพะฒะตะฝั ะผะพัั).

TS-ะฟัะพัะธะปะธ ะธ ะณัะฐัะธะบะธ: ะะพัััะพะตะฝะธะต ะฟัะพัะธะปะตะน ะฟะพ ะณะปัะฑะธะฝะต ะดะปั ะฒัะฑัะฐะฝะฝะพะน ัะพัะบะธ ั ะฝะฐะปะพะถะตะฝะธะตะผ ะบะปะธะผะฐัะพะปะพะณะธัะตัะบะธั ะดะฐะฝะฝัั.

ะะตััะธะบะฐะปัะฝัะต ัะฐะทัะตะทั: ะะฝัะตัะฐะบัะธะฒะฝะพะต ะฟะพัััะพะตะฝะธะต ัะฐะทัะตะทะพะฒ ะผะตะถะดั ะดะฒัะผั ัะพัะบะฐะผะธ ั ะฒัะฑะพัะพะผ ะณะปัะฑะธะฝั ะฟะพัััะพะตะฝะธั.

ะะฝะธะผะฐัะธั ัะฐััะธั: ะะธะทัะฐะปะธะทะฐัะธั ััะฐะตะบัะพัะธะน ะดะฒะธะถััะธััั ัะฐััะธั ะฟะพ ะฟะพะปั ัะบะพัะพััะตะน (ะฒ ัะฐะทัะฐะฑะพัะบะต).

ะัะพะตะบัะธะธ: ะะพะดะดะตัะถะบะฐ ะบะฐััะพะณัะฐัะธัะตัะบะธั ะฟัะพะตะบัะธะน ะดะปั ะะธัะพะฒะพะณะพ ะพะบะตะฐะฝะฐ, ะัะบัะธะบะธ ะธ ะะฝัะฐัะบัะธะบะธ.

ะะปั ะะธัะพะฒะพะณะพ ะะบะตะฐะฝะฐ ัะตัะบะฐ ะทะฐะดะฐะตััั:
lon = [i for i=-180:0.25:179.75]
lat = [i for i= -77:0.25:88.75]
ะัะบัะธัะตัะบะธะน ัะตะณะธะพะฝ ะพะณัะฐะฝะธัะตะฝ ัะธัะพัะพะน lat = 55, ะะฝัะฐัะบัะธัะตัะบะธะน ัะตะณะธะพะฝ ะพะณัะฐะฝะธัะตะฝ ั ัะตะฒะตัะฐ ัะธัะพัะพะน lat = -55

๐ ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ
ะะพะผะฟะพะฝะตะฝั	ะขะตัะฝะพะปะพะณะธั
ะัะบะตะฝะด (API)	Genie.jl (ะฒะตะฑ-ััะตะนะผะฒะพัะบ ะฝะฐ Julia)
ะะฐะทะฐ ะดะฐะฝะฝัั	PostgreSQL ั ัะฐััะธัะตะฝะธะตะผ PostGIS
ะคัะพะฝัะตะฝะด	ะงะธัััะน HTML, CSS, JavaScript (Canvas/WebGL)
ะัะฐัะธะบะธ	Plots.jl (GR ะฑัะบะตะฝะด), Chart.js
ะะฐััะพะณัะฐัะธั	ะะฐััะพะผะฝัะต ะฟัะตะพะฑัะฐะทะพะฒะฐะฝะธั ะบะพะพัะดะธะฝะฐั (proj4.js)
ะะตะฟะปะพะน	ะกะตัะฒะตั ะฝะฐ 0.0.0.0:8000 (ะฝะฐัััะพะตะฝะพ ะฒ app.jl)

๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ
NemoViewer/
โโโ ๐ **BACKEND (Julia/Genie.jl)**
โ   โโโ ๐ app.jl
โ   โ   โโโ ะะพะฝัะธะณััะฐัะธั ัะตัะฒะตัะฐ ะธ ััะฐัะธะบะธ
โ   โ   โโโ ะะพััะดะพะบ ะทะฐะณััะทะบะธ ะผะพะดัะปะตะน: particle_engine.jl โ api_routes.jl โ main_routes.jl
โ   โ   โโโ ะะฐะฟััะบ ัะตัะฒะตัะฐ ะฝะฐ 0.0.0.0:8000
โ   โ
โ   โโโ ๐ src/routes/
โ   โ   โโโ ๐ **api_routes.jl** (ะะะะซะ ะญะะะะะะะขะซ) โญ
โ   โ   โ   โโโ POST /api/particles/spawn-points โ ParticleEngine.generate_particle_seeds()
โ   โ   โ   โโโ POST /api/particles/batch-velocities โ ParticleEngine.get_batch_velocities()
โ   โ   โ   โโโ GET /api/particles/ping (ัะตัั)
โ   โ   โ   โโโ ๐๏ธ ะฃะะะะะะ: ััะฐััะต /trajectories, /streamlines
โ   โ   โ
โ   โ   โโโ ๐ **main_routes.jl** (ะกะขะะะะฏ ะะะะะงะะฏ ะงะะกะขะฌ)
โ   โ   โ   โโโ ะะปะฐะฒะฝะฐั ัััะฐะฝะธัะฐ ะธ ััะฐััะต API: /api/point_data, /api/plot_depth, /api/section_plot
โ   โ   โ
โ   โ   โโโ ๐ **html_templates.jl**
โ   โ       โโโ ะจะฐะฑะปะพะฝ ัััะฐะฝะธัั ั ะฟะพะดััะฐะฝะพะฒะบะพะน %JAVASCRIPT_CODE%
โ   โ       โโโ Canvas ะดะปั ัะฐััะธั (<canvas id="particleCanvas">)
โ   โ       โโโ ะฃะฟัะฐะฒะปะตะฝะธะต ะฐะฝะธะผะฐัะธะตะน
โ   โ
โ   โโโ ๐ src/utils/
โ   โ   โโโ ๐ **particle_engine.jl** (ะะะะะ ะฏะะะ) โญ
โ   โ   โ   โโโ get_batch_velocities() โ Batch-ะทะฐะฟัะพั 4 ะฑะปะธะถะฐะนัะธั ัะทะปะพะฒ ะดะปั ะผะฐััะธะฒะฐ ัะพัะตะบ
โ   โ   โ   โโโ generate_particle_seeds() โ ะกะปััะฐะนะฝัะต ัะพัะบะธ ะฒ ัะตะณะธะพะฝะต
โ   โ   โ   โโโ validate_particle_input() โ ะะฐะปะธะดะฐัะธั
โ   โ   โ   โโโ ๐ง ะัะฟะพะปัะทัะตั get_connection() ะธะท database_functions.jl
โ   โ   โ
โ   โ   โโโ ๐ **database_functions.jl** (ะกะขะะะะฏ ะะะะะงะะฏ ะงะะกะขะฌ)
โ   โ   โ   โโโ ะคัะฝะบัะธะธ ัะฐะฑะพัั ั ะะ (get_connection ะธ ะดั.)
โ   โ   โ
โ   โ   โโโ ๐ **particle_tracer.jl** (ะะฃะะะะะะข ๐๏ธ)
โ   โ       โโโ ะกัะฐัะฐั ะปะพะณะธะบะฐ ะดะพะปะณะธั ััะฐะตะบัะพัะธะน (240 ัะฐัะพะฒ) โ ะะ ะะกะะะะฌะะฃะะขะกะฏ
โ   โ
โ   โโโ ๐ src/config/
โ       โโโ database.jl โ ะะฐัััะพะนะบะธ ะฟะพะดะบะปััะตะฝะธั ะบ PostgreSQL
โ
โโโ ๐ **FRONTEND (HTML/CSS/JavaScript)**
โ   โโโ ๐ public/static/
โ   โ   โโโ ๐ js/particle-system/
โ   โ   โ   โโโ ๐ **core.js** (ะะกะะะะ ะะะฏ Windy-style) โญ
โ   โ   โ       โโโ ะะปะฐัั ParticleSystem
โ   โ   โ       โโโ ะะฐะฟัะพัั ะบ /api/particles/spawn-points ะธ /api/particles/batch-velocities
โ   โ   โ       โโโ ะััะธัะพะฒะบะฐ ัะฐััะธั ะฝะฐ Canvas
โ   โ   โ
โ   โ   โโโ ๐ maps/ โ ะัะตะดะฒะฐัะธัะตะปัะฝะพ ัะณะตะฝะตัะธัะพะฒะฐะฝะฝัะต ะบะฐััั
โ   โ
โ   โโโ ๐ **javascript_code.jl** (ะะะะะะะขะะ ะะกะะะ JS)
โ       โโโ ะัะต ััะฝะบัะธะธ ะดะปั ะบะฐัั, ะฟัะพัะธะปะตะน, ัะฐะทัะตะทะพะฒ (ัะฐะฑะพัะฐะตั)
โ       โโโ loadAndShowParticles() โ ะะฐะฟััะบ ะฝะพะฒะพะน ัะธััะตะผั ัะฐััะธั โญ
โ       โโโ ๐๏ธ ะฃะะะะะะ: ััะฐัะฐั ัะธััะตะผะฐ ัะฐััะธั (ParticleSystem ะบะปะฐัั)
โ
โโโ ๐ **DATA (PostgreSQL/PostGIS)**
โ   โโโ ะขะฐะฑะปะธัะฐ _nemo, ะฟะฐััะธัะธะพะฝะธัะพะฒะฐะฝะฝะฐั ะฟะพ ะดะฐัะฐะผ
โ   โโโ ะะพะปะต par (JSONB) ั ะผะฐััะธะฒะฐะผะธ ะฟะฐัะฐะผะตััะพะฒ ะฟะพ ะณะปัะฑะธะฝะฐะผ
โ   โโโ ะัะพัััะฐะฝััะฒะตะฝะฝัะต ะธะฝะดะตะบัั ะดะปั ะฑััััะพะณะพ ะฟะพะธัะบะฐ ะฑะปะธะถะฐะนัะธั ัะทะปะพะฒ
โ
โโโ ๐ run.jl โ ะขะพัะบะฐ ะฒัะพะดะฐ (ะทะฐะฟััะบ ัะตัะฒะตัะฐ)

<img width="5478" height="3026" alt="deepseek_mermaid_20260106_40879a" src="https://github.com/user-attachments/assets/92f4079c-1226-4d34-91ca-033276304665" />


๐ง ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ
ะัะตะดะฒะฐัะธัะตะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั:

ะฃััะฐะฝะพะฒะปะตะฝะฝัะน Julia.

ะะฐะฟััะตะฝะฝัะน ัะตัะฒะตั PostgreSQL ั ัะพะทะดะฐะฝะฝะพะน ะะ, ะฟะพะปัะทะพะฒะฐัะตะปะตะผ ะธ ัะฐััะธัะตะฝะธะตะผ PostGIS.

ะะฐัััะพะตะฝะฝัะต ัะฐะฑะปะธัั ะดะฐะฝะฝัั ะฒ ัะพะพัะฒะตัััะฒะธะธ ัะพ ััะตะผะพะน (ัะผ. ะฝะธะถะต).

ะะฐัััะพะนะบะฐ ะบะพะฝัะธะณััะฐัะธะธ:

ะััะตะดะฐะบัะธััะนัะต ัะฐะนะป src/config/database.jl, ัะบะฐะทะฐะฒ ะฟะฐัะฐะผะตััั ะฒะฐัะตะน ะะ (dbname, user, password, host, port).

ะะฐะฟััะบ ะฟัะธะปะพะถะตะฝะธั:

ะ ะบะพัะฝะตะฒะพะน ะดะธัะตะบัะพัะธะธ ะฟัะพะตะบัะฐ ะฒัะฟะพะปะฝะธัะต ะฒ ัะตัะผะธะฝะฐะปะต:

bash
julia run.jl
ะกะตัะฒะตั ะทะฐะฟัััะธััั ะฝะฐ http://0.0.0.0:8000 (ะฟะพ ัะผะพะปัะฐะฝะธั).

๐๏ธ ะกัััะบัััะฐ ะฑะฐะทั ะดะฐะฝะฝัั
ะัะฝะพะฒะฝะฐั ัะฐะฑะปะธัะฐ ั ะพะฟะตัะฐัะธะฒะฝัะผะธ ะดะฐะฝะฝัะผะธ ะผะพะดะตะปะธ ะพัะณะฐะฝะธะทะพะฒะฐะฝะฐ ะฒ ัะตะบัะธะธ (ะฟะฐััะธัะธะธ) ะฟะพ ะดะฐัะต.

sql
CREATE TABLE IF NOT EXISTS public._nemo
(
    dat date,
    lon numeric(6,2),		  -- ะ ะดะฐะฝะฝะพะผ ะฟัะพะตะบัะต, ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ัะปะตะดัะตั ะธะทะฑะตะณะฐัั
    lat numeric(6,2),
    par jsonb,                    -- ะัะฝะพะฒะฝัะต ะดะฐะฝะฝัะต: ะผะฐััะธะฒั ะฟะฐัะฐะผะตััะพะฒ ะฟะพ ะณะพัะธะทะพะฝัะฐะผ
    geom geometry(Point,4326),    -- ะะพะพัะดะธะฝะฐัั
    CONSTRAINT _nemo_dat_lon_lat_key UNIQUE (dat, lon, lat)
) PARTITION BY RANGE (dat);

-- ะัะธะผะตั ัะตะบัะธะธ ะดะปั ะบะพะฝะบัะตัะฝะพะน ะดะฐัั:
-- CREATE TABLE "2025-12-11"."_nemo_2025-12-11" PARTITION OF public._nemo ...
ะะพะปะต par (JSONB): ะกะพะดะตัะถะธั ะผะฐััะธะฒ ะพะฑัะตะบัะพะฒ, ะณะดะต ะบะฐะถะดัะน ะพะฑัะตะบั โ ะดะฐะฝะฝัะต ะดะปั ะพะดะฝะพะณะพ ะณะพัะธะทะพะฝััะฐ ะณะปัะฑะธะฝั. ะะฐะถะดัะน ะพะฑัะตะบั ัะพะดะตัะถะธั ะฟะพะปั:

depth: ะะปัะฑะธะฝะฐ ะณะพัะธะทะพะฝัะฐ (ัะบะฐะปัั, ะฝะฐะฟั., 0.51).

u, v: ะะฐััะธะฒั ะบะพะผะฟะพะฝะตะฝั ัะบะพัะพััะธ ัะตัะตะฝะธั ะฟะพ ะฒัะตะผะตะฝะธ (ะฐะฝะฐะปะธะท + ะฟัะพะณะฝะพะท).

tw, s: ะะฐััะธะฒั ัะตะผะฟะตัะฐัััั ะธ ัะพะปะตะฝะพััะธ.

iceconc, icethic, ssh, mld ะธ ะดั. โ ะดััะณะธะต ะฟะฐัะฐะผะตััั.

๐ ะะปััะตะฒัะต API-ัะฝะดะฟะพะธะฝัั
ะะตัะพะด	ะััั	ะะฐะทะฝะฐัะตะฝะธะต
GET	/	ะะปะฐะฒะฝะฐั ัััะฐะฝะธัะฐ ั ะธะฝัะตััะตะนัะพะผ.
POST	/api/point_data	ะะพะปััะตะฝะธะต ะฒัะตั ะดะฐะฝะฝัั ะฒ ะฑะปะธะถะฐะนัะตะน ะบ ะบะปะธะบั ัะพัะบะต.
POST	/api/plot_depth	ะะพัััะพะตะฝะธะต ะณัะฐัะธะบะฐ ะฟะฐัะฐะผะตััะฐ ะฟะพ ะณะปัะฑะธะฝะต ะดะปั ะฟะพัะปะตะดะฝะตะน ะฒัะฑัะฐะฝะฝะพะน ัะพัะบะธ.
POST	/api/plot_ts	ะะพัััะพะตะฝะธะต TS-ะดะธะฐะณัะฐะผะผั.
POST	/api/section_plot	ะะพัััะพะตะฝะธะต ะฒะตััะธะบะฐะปัะฝะพะณะพ ัะฐะทัะตะทะฐ ะผะตะถะดั ะดะฒัะผั ัะพัะบะฐะผะธ.
POST	/api/particles/velocity-field	(ะะพะฒัะน) ะะพะทะฒัะฐัะฐะตั ะฟะพะปะต ัะบะพัะพััะตะน ะดะปั ัะตัะบะธ.
POST	/api/particles/generate-seeds	(ะะพะฒัะน) ะะตะฝะตัะธััะตั ะฝะฐัะฐะปัะฝัะต ะฟะพะทะธัะธะธ ะดะปั ัะฐััะธั.

๐ฏ ะะฐะทัะฐะฑะพัะบะฐ ะธ ัะตะบััะธะน ัะพะบัั
ะัะฝะพะฒะฝะพะต ะฝะฐะฟัะฐะฒะปะตะฝะธะต ัะตะบััะตะน ัะฐะทัะฐะฑะพัะบะธ โ ะผะพะดัะปั ะฐะฝะธะผะฐัะธะธ ะดะฒะธะถััะธััั ัะฐััะธั.

ะฆะตะปั: ะกะพะทะดะฐัั ะฐะฝะธะผะฐัะธั, ะฐะฝะฐะปะพะณะธัะฝัั windy.com, ั ะฝะฐะปะพะถะตะฝะธะตะผ ะฝะฐ ััะฐัะธัะตัะบะธะต ะบะฐััั ะฟะฐัะฐะผะตััะพะฒ.

ะััะธัะตะบัััะฐ:

particle_engine.jl: ะััะธัะปะตะฝะธะต ััะฐะตะบัะพัะธะน ะฝะฐ ัะตัะฒะตัะต ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ะพะฟัะธะผะธะทะธัะพะฒะฐะฝะฝัั PostGIS-ะทะฐะฟัะพัะพะฒ (ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ST_Within, ะฟัะพัััะฐะฝััะฒะตะฝะฝัั ะธะฝะดะตะบัะพะฒ, TABLESAMPLE).

ะะพะฒัะต API (/api/particles/*): ะัะตะดะพััะฐะฒะปะตะฝะธะต ะดะฐะฝะฝัั ะพ ัะบะพัะพัััั ะธ ะฝะฐัะฐะปัะฝัั ะฟะพะทะธัะธัั.

ะะปะธะตะฝััะบะฐั ัะฐััั (Canvas/WebGL): ะะตะฝะดะตัะธะฝะณ ััััั ัะฐััะธั ั ัััะตะบัะฐะผะธ ัะปะตะนัะพะฒ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ.

ะะบััะฐะปัะฝัะต ะทะฐะดะฐัะธ:

ะัะฟัะฐะฒะปะตะฝะธะต ะธ ะพะฟัะธะผะธะทะฐัะธั SQL-ะทะฐะฟัะพัะพะฒ ะฒ particle_engine.jl.

ะะฝัะตะณัะฐัะธั ัะฟัะฐะฒะปะตะฝะธั ะฐะฝะธะผะฐัะธะตะน (ะฟะปะพัะฝะพััั ัะฐััะธั, ัะบะพัะพััั) ะฒ ะธะฝัะตััะตะนั.
